<ng-container *ngIf="surveys?.length">
  <ng-container *ngFor="let survey of surveys">
    <div class="alert alert-success text-center my-3">
      {{survey.name}}
    </div>
    <ng-container *ngFor="let question of survey.questions; let qIndex=index">
      <h5 class="text-primary p-2">{{qIndex + 1}}. {{question.question}}</h5>

      <ng-container *ngIf="question.answer_type === 0 || question.answer_type === 1">
        <mat-radio-group>
          <ng-container *ngFor="let option of question.options; let oIndex=index">
            <mat-radio-button (change)="option.selected = !$event.value" [value]="option.selected"  class="question-option" [disabled]="readonly">
              {{option.answer}}
            </mat-radio-button>
            <input type="text" nbInput [(ngModel)]="option.input" [readonly]="readonly"
              *ngIf="option.input_required && option.selected">
          </ng-container>
        </mat-radio-group>
      </ng-container>

      <ng-container *ngIf="question.answer_type === 2">
        <ng-container *ngFor="let option of question.options">
          <mat-checkbox [value]="option.selected" [(ngModel)]="option.selected" class="question-option"
            [disabled]="readonly">
            {{option.answer}}
          </mat-checkbox>
          <input type="text" nbInput [(ngModel)]="option.input" [readonly]="readonly"
            *ngIf="option.input_required && option.selected">
        </ng-container>
      </ng-container>

      <ng-container *ngIf="question.answer_type === 3">
        <textarea nbInput fullWidth placeholder="" [(ngModel)]="question.options[0].answer"
          [disabled]="readonly"></textarea>
      </ng-container>

    </ng-container>
  </ng-container>

</ng-container>

<ng-container *ngIf="!surveys?.length">
  <blockquote>
    <p>{{readonly? '病患没有填写该问卷' : '无可用的问卷。'}}</p>
  </blockquote>
</ng-container>
